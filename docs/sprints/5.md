# Sprint 5 - Technical Debt & Type Safety

## Priority Items

### MyPy Type System Fixes (High Priority)
**Issue**: Remaining architectural type inconsistencies requiring code changes.

#### Interface Design Problems
- [ ] **PromptInterface Incomplete**: Base interface missing methods used by implementations
  - Missing: `get_nutrition_prompt()`, `get_lifestyle_prompt()`, `get_guidelines_prompt()`, etc.
  - **Fix**: Add all methods to `PromptInterface` as `@abstractmethod` or restructure with composition

#### Return Type Mismatches
- [ ] **VidaNovaPrompts Return Types**: Methods return `str` but interface expects `tuple[str, str]`
  - **Impact**: Breaks Liskov Substitution Principle
  - **Fix**: Standardize return types across interface hierarchy

#### Plugin Architecture Issues
- [ ] **Plugin Return Types**: `VidaNovaPlugin.build_report()` returns `VidaNovaReport` but base expects `IonNutriReport`
  - **Fix**: Create generic base report type or update interface

#### Attribute Access Issues
- [ ] **BaseReport Missing Attributes**: `report_out.py` accesses non-existent attributes
  - Missing: `recommendations`, `deficiencies`, `general_guidelines`, etc.
  - **Fix**: Use proper inheritance hierarchy or add missing attributes

#### Type Assignment Issues
- [ ] **String to Float Conversion**: Multiple locations assigning strings to float fields
  - **Locations**: `knowledge_graph_builder.py` lines 86, 93, 121, 124, 129
  - **Fix**: Add proper type conversions

#### OpenAI Client Integration
- [ ] **Message Type Compatibility**: OpenAI client expects specific message param types
  - **Current**: `list[dict[str, str]]`
  - **Required**: `list[ChatCompletionMessageParam]`
  - **Fix**: Import and use proper OpenAI types

### Technical Debt Assessment
- **Estimated Effort**: 2-3 days
- **Risk Level**: Medium (affects type safety and maintainability)
- **Dependencies**: None (can be done incrementally)

### Notes
These issues represent **architectural debt** from interface evolution without strict contract adherence. Priority should be given to interface consistency and return type standardization before tackling individual attribute access issues.
